---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.15.0
  name: ippoolpolicies.net.techonfire.ir
spec:
  group: net.techonfire.ir
  names:
    kind: IPPoolPolicy
    listKind: IPPoolPolicyList
    plural: ippoolpolicies
    shortNames:
    - ippp
    singular: ippoolpolicy
  scope: Cluster
  versions:
  - additionalPrinterColumns:
    - jsonPath: .status.dirString
      name: DIR
      type: string
    - jsonPath: .status.portList
      name: PORTS
      type: string
    - jsonPath: .status.podSelectorString
      name: POD-SELECTOR
      type: string
    - jsonPath: .status.nsSelectorString
      name: NS-SELECTOR
      type: string
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: |-
          Pretty columns that read from .status (strings you set in Reconcile):
          NOTE: keep the quotes as plain ASCII " characters.
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: IPPoolPolicySpec defines the desired state of IPPoolPolicy.
            properties:
              policy:
                description: How the policy should look
                properties:
                  namePrefix:
                    description: 'Optional prefix for created NetworkPolicy names.
                      Default: "ippool-".'
                    type: string
                  ports:
                    description: Ports (applied to both ingress/egress rules if present).
                    items:
                      description: NetworkPolicyPort describes a port to allow traffic
                        on
                      properties:
                        endPort:
                          description: |-
                            endPort indicates that the range of ports from port to endPort if set, inclusive,
                            should be allowed by the policy. This field cannot be defined if the port field
                            is not defined or if the port field is defined as a named (string) port.
                            The endPort must be equal or greater than port.
                          format: int32
                          type: integer
                        port:
                          anyOf:
                          - type: integer
                          - type: string
                          description: |-
                            port represents the port on the given protocol. This can either be a numerical or named
                            port on a pod. If this field is not provided, this matches all port names and
                            numbers.
                            If present, only traffic on the specified protocol AND port will be matched.
                          x-kubernetes-int-or-string: true
                        protocol:
                          default: TCP
                          description: |-
                            protocol represents the protocol (TCP, UDP, or SCTP) which traffic must match.
                            If not specified, this field defaults to TCP.
                          type: string
                      type: object
                    type: array
                  types:
                    description: Types must include either Egress, Ingress, or both.
                    items:
                      description: |-
                        PolicyType string describes the NetworkPolicy type
                        This type is beta-level in 1.8
                      type: string
                    minItems: 1
                    type: array
                required:
                - types
                type: object
              refreshInterval:
                default: 1h
                description: How often to re-fetch & reconcile, e.g., "30m", "1h".
                  Default 1h.
                type: string
              source:
                description: Where to fetch/define the IPs
                properties:
                  httpHeaders:
                    additionalProperties:
                      type: string
                    description: Optional HTTP headers to include when fetching URLs
                      (e.g., Authorization).
                    type: object
                  inlineCIDRs:
                    description: InlineCIDRs provides additional IPs/CIDRs.
                    items:
                      type: string
                    type: array
                  urls:
                    description: URLs with one IP/CIDR per line (comments with '#').
                    items:
                      type: string
                    type: array
                type: object
              target:
                description: Where to apply the policy
                properties:
                  namespaceSelector:
                    description: |-
                      NamespaceSelector chooses namespaces (required for Cluster-scoped CRD).
                      If omitted or empty, no namespaces will match (be explicit!).
                    properties:
                      matchExpressions:
                        description: matchExpressions is a list of label selector
                          requirements. The requirements are ANDed.
                        items:
                          description: |-
                            A label selector requirement is a selector that contains values, a key, and an operator that
                            relates the key and values.
                          properties:
                            key:
                              description: key is the label key that the selector
                                applies to.
                              type: string
                            operator:
                              description: |-
                                operator represents a key's relationship to a set of values.
                                Valid operators are In, NotIn, Exists and DoesNotExist.
                              type: string
                            values:
                              description: |-
                                values is an array of string values. If the operator is In or NotIn,
                                the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                the values array must be empty. This array is replaced during a strategic
                                merge patch.
                              items:
                                type: string
                              type: array
                              x-kubernetes-list-type: atomic
                          required:
                          - key
                          - operator
                          type: object
                        type: array
                        x-kubernetes-list-type: atomic
                      matchLabels:
                        additionalProperties:
                          type: string
                        description: |-
                          matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                          map is equivalent to an element of matchExpressions, whose key field is "key", the
                          operator is "In", and the values array contains only "value". The requirements are ANDed.
                        type: object
                    type: object
                    x-kubernetes-map-type: atomic
                  podSelector:
                    description: |-
                      PodSelector chooses pods inside each matched namespace.
                      Empty selector means all pods.
                    properties:
                      matchExpressions:
                        description: matchExpressions is a list of label selector
                          requirements. The requirements are ANDed.
                        items:
                          description: |-
                            A label selector requirement is a selector that contains values, a key, and an operator that
                            relates the key and values.
                          properties:
                            key:
                              description: key is the label key that the selector
                                applies to.
                              type: string
                            operator:
                              description: |-
                                operator represents a key's relationship to a set of values.
                                Valid operators are In, NotIn, Exists and DoesNotExist.
                              type: string
                            values:
                              description: |-
                                values is an array of string values. If the operator is In or NotIn,
                                the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                the values array must be empty. This array is replaced during a strategic
                                merge patch.
                              items:
                                type: string
                              type: array
                              x-kubernetes-list-type: atomic
                          required:
                          - key
                          - operator
                          type: object
                        type: array
                        x-kubernetes-list-type: atomic
                      matchLabels:
                        additionalProperties:
                          type: string
                        description: |-
                          matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                          map is equivalent to an element of matchExpressions, whose key field is "key", the
                          operator is "In", and the values array contains only "value". The requirements are ANDed.
                        type: object
                    type: object
                    x-kubernetes-map-type: atomic
                type: object
            required:
            - policy
            - source
            - target
            type: object
          status:
            description: IPPoolPolicyStatus captures the operator's last observed
              state.
            properties:
              dirString:
                type: string
              effectiveCIDRs:
                items:
                  type: string
                type: array
              hash:
                type: string
              lastSyncTime:
                format: date-time
                type: string
              namespaces:
                items:
                  type: string
                type: array
              nsSelectorString:
                type: string
              observedGeneration:
                format: int64
                type: integer
              podSelectorString:
                type: string
              policies:
                format: int32
                type: integer
              portList:
                description: '--- Pretty strings for kubectl columns ---'
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
